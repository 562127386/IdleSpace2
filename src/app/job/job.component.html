<nz-card
  style="width:100%;"
  [nzTitle]="titleTemplate"
  [nzExtra]="extraTemplate"
  nzSize="small"
>
  <p>{{ job.description }}</p>

  <span
    class="monospace"
    fxLayout="row"
    fxLayout.xs="column"
    fxLayoutAlign="space-between"
  >
    <span>
      <i nz-icon nzType="clock-circle" nzTheme="outline" class="space"></i>
      <span> {{ job.timeToEnd | time }}</span>
    </span>
    <span>
      {{ job.progress | format }}/{{ job.total | format }}
      {{ job.progressPercent }}%</span
    >
  </span>

  <app-progress [progress]="job.progressPercent"></app-progress>
</nz-card>

<ng-template #extraTemplate>
  <span *ngIf="research && research.totalBonusUi.gt(0)" class="monospace">
    +{{ research.totalBonusUi | format }}%
  </span>
</ng-template>

<ng-template #titleTemplate>
  <span
    *ngFor="let item of icons; trackBy: getIconId"
    [style.color]="item.color"
    ><i nz-icon [nzType]="item.icon"></i
  ></span>
  {{ job.name }}
</ng-template>
